{"version":3,"sources":["utils/constants.js","utils/checkResponse.js","utils/auth.js","utils/api.js","contexts/CurrentUserContext.js","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ProtectedRoute.js","components/Popup.js","images/success.svg","images/failure.svg","components/InfoTooltip.js","components/Register.js","components/Login.js","components/App.js","reportWebVitals.js","index.jsx"],"names":["AUTH_ENDPOINT","STORAGE_TOKEN_KEY","checkResponse","res","ok","json","Promise","reject","status","getAccessToken","localStorage","getItem","signOut","removeItem","getUserInfo","headers","Authorization","fetch","method","then","api","options","this","baseUrl","setAuthHeader","name","about","body","JSON","stringify","link","cardId","isLiked","avatar","CurrentUserContext","createContext","Header","onSignOut","user","useContext","location","useLocation","className","to","target","title","pathname","email","type","onClick","Card","card","onCardClick","onDeleteClick","onCardLike","likes","owner","isOwn","_id","some","i","aria-label","src","alt","onKeyDown","evt","key","length","Main","onEditProfile","onAddPlace","onEditAvatar","onCardDelete","cards","map","Footer","Date","getFullYear","PopupWithForm","buttonText","isOpened","onClose","onSubmit","children","onKeyPress","console","log","role","noValidate","ImagePopup","selectedCard","loading","EditProfilePopup","onUpdateUser","useState","value","validity","validtityMessage","form","setForm","useEffect","handleChange","validationMessage","preventDefault","placeholder","minLength","maxLength","required","onChange","EditAvatarPopup","onAvatarUpdate","avatarRef","useRef","current","ref","AddPlacePopup","ProtectedRoute","path","exact","isLoggedIn","render","Popup","InfoTooltip","success","successImage","failureImage","Register","onRegister","password","Login","onLogin","history","useHistory","push","App","currentUser","setCurrentUser","setCards","fetchCards","fetchedCards","data","catch","err","userRes","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmDeletePopupOpen","setIsConfirmDeletePopupOpen","open","state","infoTooltip","setInfoTooltip","setSelectedCard","closeAllPopups","basename","process","Provider","url","signUp","signIn","token","setItem","changeCardLikeStatus","newCard","c","deleteCard","filter","updateUserInfo","updateUserAvatar","createCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"+OAEaA,EAAgB,iCAEhBC,EAAoB,OCJlB,SAASC,EAAcC,GACpC,OAAIA,EAAIC,GACCD,EAAIE,OAGNC,QAAQC,OAAR,+CAAyBJ,EAAIK,SCF/B,IAIMC,EAAiB,kBAAMC,aAAaC,QAAQV,IAqC5CW,EAAU,WAlCrBF,aAAaG,WAAWZ,IAsCba,EAAc,WACzB,IAAMC,EAAU,CACd,eAAgB,mBAChBC,cAAc,UAAD,OAAYP,MAG3B,OAAOQ,MAAM,GAAD,OAAIjB,EAAJ,YAA6B,CACvCkB,OAAQ,MACRH,YACCI,KAAKjB,ICoBKkB,EAPH,I,WAjEV,WAAYC,GAAU,oBACpBC,KAAKC,QAAUF,EAAQE,QACvBD,KAAKP,QAAUM,EAAQN,QAEvBO,KAAKE,gB,iDAGP,WACEF,KAAKP,QAAQC,cAAb,iBAAuCP,O,4BAGzC,SAAegB,EAAMC,GACnB,OAAOT,MAAM,GAAD,OAAIjB,EAAJ,YAA6B,CACvCkB,OAAQ,QACRH,QAASO,KAAKP,QACdY,KAAMC,KAAKC,UAAU,CACnBJ,OACAC,YAEDP,KAAKjB,K,wBAGV,WACE,OAAOe,MAAM,GAAD,OAAIjB,EAAJ,SAA0B,CACpCkB,OAAQ,MACRH,QAASO,KAAKP,UACbI,KAAKjB,K,wBAGV,YAA4B,IAAfuB,EAAc,EAAdA,KAAMK,EAAQ,EAARA,KACjB,OAAOb,MAAM,GAAD,OAAIjB,EAAJ,SAA0B,CACpCkB,OAAQ,OACRH,QAASO,KAAKP,QACdY,KAAMC,KAAKC,UAAU,CACnBJ,OACAK,WAEDX,KAAKjB,K,wBAGV,SAAW6B,GACT,OAAOd,MAAM,GAAD,OAAIjB,EAAJ,iBAA0B+B,GAAU,CAC9Cb,OAAQ,SACRH,QAASO,KAAKP,UACbI,KAAKjB,K,kCAGV,SAAqB6B,EAAQC,GAC3B,OAAOf,MAAM,GAAD,OAAIjB,EAAJ,iBAA0B+B,EAA1B,UAA0C,CACpDb,OAAQc,EAAU,SAAW,MAC7BjB,QAASO,KAAKP,UACbI,KAAKjB,K,8BAGV,SAAiB+B,GACf,OAAOhB,MAAM,GAAD,OAAIjB,EAAJ,mBAAoC,CAC9CkB,OAAQ,QACRH,QAASO,KAAKP,QACdY,KAAMC,KAAKC,UAAU,CACnBI,aAEDd,KAAKjB,O,KAIA,CAAQ,CAClBqB,QHtEqB,8CGuErBR,QAAS,CACP,eAAgB,sBCtELmB,EADYC,0B,OCGZ,SAASC,EAAT,GAAgC,IAAdC,EAAa,EAAbA,UACzBC,EAAOC,qBAAWL,GAClBM,EAAWC,cAEjB,OACE,yBAAQC,UAAU,mBAAlB,UACE,cAAC,IAAD,CACEC,GAAG,IACHD,UAAU,eACVE,OAAO,QACPC,MAAM,oGAJR,SAME,sBAAMH,UAAU,uBAAhB,kHAEAJ,GAA8B,aAAtBE,EAASM,UACjB,cAAC,IAAD,CAASH,GAAG,WAAWD,UAAU,OAAjC,iFAIAJ,GAA8B,aAAtBE,EAASM,UACjB,cAAC,IAAD,CAASH,GAAG,WAAWD,UAAU,OAAjC,4CAIDJ,GACC,qCACE,sBAAMI,UAAU,sBAAhB,SAAuCJ,EAAKS,QAC5C,wBACEC,KAAK,SACLN,UAAU,2BACVO,QAASZ,EAHX,kDC5BK,SAASa,EAAT,GAAiE,IAAjDC,EAAgD,EAAhDA,KAAMC,EAA0C,EAA1CA,YAAaC,EAA6B,EAA7BA,cAAeC,EAAc,EAAdA,WACvD7B,EAA6B0B,EAA7B1B,KAAMK,EAAuBqB,EAAvBrB,KAAMyB,EAAiBJ,EAAjBI,MAAOC,EAAUL,EAAVK,MAErBlB,EAAOC,qBAAWL,GAElBuB,EAAQD,KAAK,OAAKlB,QAAL,IAAKA,OAAL,EAAKA,EAAMoB,KACxB1B,EAAO,OAAGuB,QAAH,IAAGA,OAAH,EAAGA,EAAOI,MAAK,SAACC,GAAD,OAAOA,KAAC,OAAKtB,QAAL,IAAKA,OAAL,EAAKA,EAAMoB,QAU/C,OACE,qBAAIhB,UAAU,OAAd,UACGe,GACC,wBACEf,UAAU,4BACVM,KAAK,SACLa,aAAW,8FACXZ,QAXR,WACEI,EAAcF,MAaZ,qBACEW,IAAKhC,EACLiC,IAAKtC,EACLiB,UAAU,+BACVO,QAAS,kBAAMG,EAAYD,IAC3Ba,UAAW,SAACC,GAAD,MAAqB,UAAZA,EAAIC,KAAmBd,EAAYD,MAEzD,sBAAKT,UAAU,aAAf,UACE,oBAAIA,UAAU,cAAcG,MAAOpB,EAAnC,SACGA,IAEH,sBAAKiB,UAAU,qBAAf,UACE,wBACEM,KAAK,SAELa,aAAW,mIACXnB,UAAS,kCACPV,GAAW,2BAEbiB,QArCV,WACEK,EAAWH,MAsCL,sBAAMT,UAAU,qBAAhB,gBAAsCa,QAAtC,IAAsCA,OAAtC,EAAsCA,EAAOY,kBC7CxC,SAASC,EAAT,GAQX,IAPFC,EAOC,EAPDA,cACAC,EAMC,EANDA,WACAC,EAKC,EALDA,aACAnB,EAIC,EAJDA,YACAE,EAGC,EAHDA,WACAkB,EAEC,EAFDA,aACAC,EACC,EADDA,MAEMnC,EAAOC,qBAAWL,GAExB,OACE,uBAAMQ,UAAU,iBAAhB,UACE,0BAASA,UAAU,UAAnB,UACE,sBAAKA,UAAU,SAAf,UACE,qBAAKoB,IAAG,OAAExB,QAAF,IAAEA,OAAF,EAAEA,EAAML,OAAQS,UAAU,gBAAgBqB,IAAG,OAAEzB,QAAF,IAAEA,OAAF,EAAEA,EAAMb,OAC7D,wBACEiB,UAAU,sBACVmB,aAAW,sHACXb,KAAK,SACLC,QAASsB,OAGb,sBAAK7B,UAAU,eAAf,UACE,sBAAKA,UAAU,sBAAf,UACE,oBAAIA,UAAU,qBAAd,gBAAoCJ,QAApC,IAAoCA,OAApC,EAAoCA,EAAMb,OAC1C,wBACEuB,KAAK,SACLa,aAAW,4HACXnB,UAAU,0BACVO,QAASoB,OAGb,mBAAG3B,UAAU,sBAAb,gBAAoCJ,QAApC,IAAoCA,OAApC,EAAoCA,EAAMZ,WAE5C,wBACEsB,KAAK,SACLa,aAAW,mDACXnB,UAAU,yBACVO,QAASqB,OAGb,kCACE,oBAAI5B,UAAU,WAAd,SACG+B,EAAMC,KAAI,SAACvB,GAAD,OACT,cAACD,EAAD,CACEC,KAAMA,EAENC,YAAaA,EACbC,cAAemB,EACflB,WAAYA,GAHPH,EAAKO,eCnDT,SAASiB,IACtB,OACE,wBAAQjC,UAAU,mBAAlB,SACE,oBAAGA,UAAU,gBAAb,mBAAgC,IAAIkC,MAAOC,cAA3C,qBCLS,SAASC,EAAT,GAQX,IAPFjC,EAOC,EAPDA,MACApB,EAMC,EANDA,KACAsD,EAKC,EALDA,WACAC,EAIC,EAJDA,SACAC,EAGC,EAHDA,QACAC,EAEC,EAFDA,SACAC,EACC,EADDA,SAGA,OACE,sBACEzC,UACEsC,EAAQ,2BACgBvD,EADhB,4CAEgBA,GAE1B2D,WAAY,SAACnB,GACXoB,QAAQC,IAAIrB,IAEdsB,KAAK,SATP,UAWE,sBAAK7C,UAAU,6BAAf,UACE,wBACEM,KAAK,SACLa,aAAW,6CACXnB,UAAU,2BACVO,QAASgC,IAEX,sBACEvC,UAAU,OACVjB,KAAI,UAAKA,EAAL,SACJyD,SAAUA,EACVM,YAAU,EAJZ,SAME,sBAAK9C,UAAU,cAAf,UACE,oBAAIA,UAAU,eAAd,SAA8BG,IAC7BsC,EACD,wBACEzC,UAAU,0BACVM,KAAK,SAFP,SAIG+B,YAKT,wBACE/B,KAAK,SACLH,MAAM,6CACNgB,aAAW,6CACXnB,UAAU,iBACVO,QAASgC,OCpDF,SAASQ,EAAT,GAAgD,IAA1BC,EAAyB,EAAzBA,aAAcT,EAAW,EAAXA,QAEjD,OACE,qBACEvC,UAAS,gBACCgD,EAAe,eAAiB,IAF5C,SAIE,sBAAKhD,UAAU,yBAAf,UACE,wBACEM,KAAK,SACLa,aAAW,6CACXnB,UAAU,2BACVO,QAASgC,IAEX,qBACEnB,IAAG,OAAE4B,QAAF,IAAEA,OAAF,EAAEA,EAAc5D,KACnBiC,IAAG,OAAE2B,QAAF,IAAEA,OAAF,EAAEA,EAAcjE,KACnBkE,QAAQ,OACRjD,UAAU,uBAEZ,oBAAIA,UAAU,qBAAd,gBAAoCgD,QAApC,IAAoCA,OAApC,EAAoCA,EAAcjE,Y,WC8E3CmE,MA7Ff,YAAgE,IAApCZ,EAAmC,EAAnCA,SAAUC,EAAyB,EAAzBA,QAASY,EAAgB,EAAhBA,aACvCvD,EAAOC,qBAAWL,GAExB,EAAwB4D,mBAAS,CAC/BrE,KAAM,CACJsE,MAAO,GACPC,SAAU,KACVC,iBAAkB,IAEpBvE,MAAO,CACLqE,MAAO,GACPC,SAAU,KACVC,iBAAkB,MATtB,mBAAOC,EAAP,KAAaC,EAAb,KAaAC,qBAAU,WACRD,EAAQ,CACN1E,KAAM,CACJsE,MAAK,OAAEzD,QAAF,IAAEA,OAAF,EAAEA,EAAMb,KACbuE,UAAU,EACVC,iBAAkB,IAEpBvE,MAAO,CACLqE,MAAK,OAAEzD,QAAF,IAAEA,OAAF,EAAEA,EAAMZ,MACbsE,UAAU,EACVC,iBAAkB,QAGrB,CAAC3D,EAAM0C,IAEV,IAAMqB,EAAe,SAACpC,GACpBkC,EAAQ,2BACHD,GADE,kBAEJjC,EAAIrB,OAAOnB,KAAO,CACjBsE,MAAO9B,EAAIrB,OAAOmD,MAClBC,SAAU/B,EAAIrB,OAAOoD,SACrBC,iBAAkBhC,EAAIrB,OAAO0D,uBAcnC,OACE,eAACxB,EAAD,CACEE,SAAUA,EACVC,QAASA,EACTC,SAbJ,SAAsBjB,GACpBA,EAAIsC,iBAEJV,EAAa,CACXpE,KAAMyE,EAAKzE,KAAKsE,MAChBrE,MAAOwE,EAAKxE,MAAMqE,SASlBtE,KAAK,OACLoB,MAAM,4HACNkC,WAAW,yDANb,UAQE,sBAAKrC,UAAU,oBAAf,UACE,uBACEM,KAAK,OACLN,UAAU,mBACV8D,YAAY,qBACZC,UAAU,IACVC,UAAU,KACVC,UAAQ,EACRlF,KAAK,OACLsE,MAAOG,EAAKzE,KAAKsE,OAAS,GAC1Ba,SAAUP,IAEZ,sBAAM3D,UAAU,oBAAhB,SAAqCwD,EAAKzE,KAAKwE,sBAGjD,sBAAKvD,UAAU,oBAAf,UACE,uBACEM,KAAK,OACLN,UAAU,mBACV8D,YAAY,kCACZC,UAAU,IACVC,UAAU,MACVC,UAAQ,EACRlF,KAAK,QACLsE,MAAOG,EAAKxE,MAAMqE,OAAS,GAC3Ba,SAAUP,IAEZ,sBAAM3D,UAAU,oBAAhB,SAAqCwD,EAAKxE,MAAMuE,0BCpDzCY,MArCf,YAAiE,IAAtC7B,EAAqC,EAArCA,SAAUC,EAA2B,EAA3BA,QAAS6B,EAAkB,EAAlBA,eACtCC,EAAYC,iBAAO,MAUzB,OACE,cAAClC,EAAD,CACEE,SAAUA,EACVC,QAASA,EACTC,SAZJ,SAAsBjB,GACpBA,EAAIsC,iBAEJO,EAAe,CACb7E,OAAQ8E,EAAUE,QAAQlB,SAS1BtE,KAAK,SACLoB,MAAM,wFACNkC,WAAW,yDANb,SAQE,qBAAKrC,UAAU,oBAAf,SACE,uBACEM,KAAK,MACLN,UAAU,mBACVjB,KAAK,cACL+E,YAAY,qGACZU,IAAKH,EACLJ,UAAQ,SC1BH,SAASQ,EAAT,GAA2D,IAAlCnC,EAAiC,EAAjCA,SAAUC,EAAuB,EAAvBA,QAASX,EAAc,EAAdA,WACzD,EAAwBwB,mBAAS,CAC/BjD,MAAO,CACLkD,MAAO,GACPC,SAAU,KACVC,iBAAkB,IAEpBnE,KAAM,CACJiE,MAAO,GACPC,SAAU,KACVC,iBAAkB,MATtB,mBAAOC,EAAP,KAAaC,EAAb,KAaME,EAAe,SAACpC,GACpBkC,EAAQ,2BACHD,GADE,kBAEJjC,EAAIrB,OAAOnB,KAAO,CACjBsE,MAAO9B,EAAIrB,OAAOmD,MAClBC,SAAU/B,EAAIrB,OAAOoD,SACrBC,iBAAkBhC,EAAIrB,OAAO0D,uBAcnC,OACE,eAACxB,EAAD,CACEE,SAAUA,EACVC,QAASA,EACTC,SAbJ,SAAsBjB,GACpBA,EAAIsC,iBAEJjC,EAAW,CACTzB,MAAOqD,EAAKrD,MAAMkD,MAClBjE,KAAMoE,EAAKpE,KAAKiE,SAShBtE,KAAK,MACLoB,MAAM,gEACNkC,WAAW,6CANb,UAQE,sBAAKrC,UAAU,oBAAf,UACE,uBACEM,KAAK,OACLvB,KAAK,QACLiB,UAAU,mBACV8D,YAAY,mDACZC,UAAU,IACVC,UAAU,KACVC,UAAQ,EACRZ,MAAOG,EAAKrD,MAAMkD,MAClBa,SAAUP,IAEZ,sBAAM3D,UAAU,oBAAhB,SAAqCwD,EAAKrD,MAAMoD,sBAGlD,sBAAKvD,UAAU,oBAAf,UACE,uBACEM,KAAK,MACLvB,KAAK,OACLiB,UAAU,mBACV8D,YAAY,qGACZG,UAAQ,EACRZ,MAAOG,EAAKpE,KAAKiE,MACjBa,SAAUP,IAEZ,sBAAM3D,UAAU,oBAAhB,SAAqCwD,EAAKpE,KAAKmE,yBClDxCmB,MAnBf,YAII,IAHFC,EAGC,EAHDA,KACAC,EAEC,EAFDA,MACAnC,EACC,EADDA,SAGMoC,EAAa9G,IAEnB,OACE,cAAC,IAAD,CACE4G,KAAMA,EACNC,MAAOA,EACPE,OAAQ,kBACND,EAAapC,EAAW,cAAC,IAAD,CAAUxC,GAAG,iBCwB9B8E,MAtCf,YAKI,IAJFzC,EAIC,EAJDA,SACAvD,EAGC,EAHDA,KACAwD,EAEC,EAFDA,QACAE,EACC,EADDA,SAEA,OACE,sBACEzC,UACEsC,EAAQ,2BACgBvD,EADhB,4CAEgBA,GAE1B2D,WAAY,SAACnB,GACXoB,QAAQC,IAAIrB,IAEdsB,KAAK,SATP,UAWE,sBAAK7C,UAAU,6BAAf,UACE,wBACEM,KAAK,SACLa,aAAW,6CACXnB,UAAU,2BACVO,QAASgC,IAEVE,KAEH,wBACEnC,KAAK,SACLH,MAAM,6CACNgB,aAAW,6CACXnB,UAAU,iBACVO,QAASgC,QClCF,MAA0B,oCCA1B,MAA0B,oCCoC1ByC,MA9Bf,YAA4D,IAArCC,EAAoC,EAApCA,QAASlG,EAA2B,EAA3BA,KAAMuD,EAAqB,EAArBA,SAAUC,EAAW,EAAXA,QAC9C,OACE,cAAC,EAAD,CAAOD,SAAUA,EAAUvD,KAAMA,EAAMwD,QAASA,EAAhD,SACE,qBAAKvC,UAAU,cAAf,SACGiF,EACC,qCACE,qBACE7D,IAAK8D,EACL7D,IAAI,iCACJrB,UAAU,uBAEZ,mBAAGA,UAAU,oBAAb,sLAGF,qCACE,qBACEoB,IAAK+D,EACL9D,IAAI,uCACJrB,UAAU,uBAEZ,mBAAGA,UAAU,oBAAb,yNCkEGoF,MAzFf,YAAmC,IAAfC,EAAc,EAAdA,WAClB,EAAwBjC,mBAAS,CAC/B/C,MAAO,CACLgD,MAAO,GACPC,SAAU,KACVC,iBAAkB,IAEpB+B,SAAU,CACRjC,MAAO,GACPC,SAAU,KACVC,iBAAkB,MATtB,mBAAOC,EAAP,KAAaC,EAAb,KAaME,EAAe,SAACpC,GACpBkC,EAAQ,2BACHD,GADE,kBAEJjC,EAAIrB,OAAOnB,KAAO,CACjBsE,MAAO9B,EAAIrB,OAAOmD,MAClBC,SAAU/B,EAAIrB,OAAOoD,SACrBC,iBAAkBhC,EAAIrB,OAAO0D,uBAWnC,OACE,uBAAM5D,UAAU,uBAAhB,UACE,oBAAIA,UAAU,2BAAd,gFACA,uBACEA,UAAU,cACVjB,KAAK,aACLyD,SAZiB,SAACjB,GACtBA,EAAIsC,iBAEJwB,EAAW7B,EAAKnD,MAAMgD,MAAOG,EAAK8B,SAASjC,QAUvCP,YAAU,EAJZ,UAME,sBAAK9C,UAAU,mDAAf,UACE,uBACEM,KAAK,QACLvB,KAAK,QACLiB,UAAU,mBACV8D,YAAY,QACZC,UAAU,IACVC,UAAU,KACVC,UAAQ,EACRZ,MAAOG,EAAKnD,MAAMgD,MAClBa,SAAUP,IAEZ,sBAAM3D,UAAU,oBAAhB,SACGwD,EAAKnD,MAAMkD,sBAIhB,sBAAKvD,UAAU,mDAAf,UACE,uBACEM,KAAK,WACLvB,KAAK,WACLiB,UAAU,mBACV8D,YAAY,uCACZG,UAAQ,EACRZ,MAAOG,EAAK8B,SAASjC,MACrBa,SAAUP,EACVI,UAAW,IAEb,sBAAM/D,UAAU,oBAAhB,SACGwD,EAAK8B,SAAS/B,sBAGnB,wBACEvD,UAAU,+CACVM,KAAK,SAFP,6HAOF,sBAAKN,UAAU,iBAAf,UACE,sBAAMA,UAAU,OAAhB,mIACA,cAAC,IAAD,CAASA,UAAU,OAAOC,GAAG,WAA7B,mDCOOsF,MAxFf,YAA6B,IAAZC,EAAW,EAAXA,QACTC,EAAUC,cAEhB,EAAwBtC,mBAAS,CAC/B/C,MAAO,CACLgD,MAAO,GACPC,SAAU,KACVC,iBAAkB,IAEpB+B,SAAU,CACRjC,MAAO,GACPC,SAAU,KACVC,iBAAkB,MATtB,mBAAOC,EAAP,KAAaC,EAAb,KAaME,EAAe,SAACpC,GACpBkC,EAAQ,2BACHD,GADE,kBAEJjC,EAAIrB,OAAOnB,KAAO,CACjBsE,MAAO9B,EAAIrB,OAAOmD,MAClBC,SAAU/B,EAAIrB,OAAOoD,SACrBC,iBAAkBhC,EAAIrB,OAAO0D,uBAcnC,OACE,uBAAM5D,UAAU,uBAAhB,UACE,oBAAIA,UAAU,2BAAd,sCACA,uBACEA,UAAU,cACVjB,KAAK,aACLyD,SAfc,SAACjB,GACnBA,EAAIsC,iBAEJ2B,EAAQ,CACNnF,MAAOmD,EAAKnD,MAAMgD,MAClBiC,SAAU9B,EAAK8B,SAASjC,QACvB5E,MAAK,kBAAMgH,EAAQE,KAAK,SAUvB7C,YAAU,EAJZ,UAME,sBAAK9C,UAAU,mDAAf,UACE,uBACEM,KAAK,QACLvB,KAAK,QACLiB,UAAU,mBACV8D,YAAY,QACZC,UAAU,IACVC,UAAU,KACVC,UAAQ,EACRZ,MAAOG,EAAKnD,MAAMgD,MAClBa,SAAUP,IAEZ,sBAAM3D,UAAU,oBAAhB,SACGwD,EAAKnD,MAAMkD,sBAIhB,sBAAKvD,UAAU,mDAAf,UACE,uBACEM,KAAK,WACLvB,KAAK,WACLiB,UAAU,mBACV8D,YAAY,uCACZG,UAAQ,EACRZ,MAAOG,EAAK8B,SAASjC,MACrBa,SAAUP,EACVI,UAAW,IAEb,sBAAM/D,UAAU,oBAAhB,SACGwD,EAAK8B,SAAS/B,sBAGnB,wBACEvD,UAAU,+CACVM,KAAK,SAFP,mDC2KOsF,MA/Nf,WACE,MAAsCxC,mBAAS,MAA/C,mBAAOyC,EAAP,KAAoBC,EAApB,KACA,EAA0B1C,mBAAS,IAAnC,mBAAOrB,EAAP,KAAcgE,EAAd,KAEArC,qBAAU,WACJ3F,MACFW,EACGsH,aACAvH,MAAK,SAACwH,GAAD,OAAkBF,EAASE,EAAaC,SAC7CC,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,MAE9BhI,IACGK,MAAK,SAAC4H,GAAD,OAAaP,EAAeO,EAAQH,SACzCC,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,SAE/B,IAEH,MAA4DhD,oBAAS,GAArE,mBAAOkD,EAAP,KAA+BC,EAA/B,KACA,EAAsDnD,oBAAS,GAA/D,mBAAOoD,EAAP,KAA4BC,EAA5B,KACA,EAA0DrD,oBAAS,GAAnE,mBAAOsD,EAAP,KAA8BC,EAA9B,KACA,EAAgEvD,oBAC9D,GADF,mBAAOwD,EAAP,KAAiCC,EAAjC,KAIA,EAAsCzD,mBAAS,CAC7C0D,MAAM,EACNC,OAAO,IAFT,mBAAOC,EAAP,KAAoBC,GAApB,KAIA,GAAwC7D,mBAAS,MAAjD,qBAAOJ,GAAP,MAAqBkE,GAArB,MAsBA,SAASC,KACPR,GAAyB,GACzBJ,GAA0B,GAC1BE,GAAuB,GACvBI,GAA4B,GAC5BI,IAAe,SAACF,GAAD,mBAAC,eACXA,GADU,IAEbD,MAAM,OAERI,GAAgB,MAgGlB,OACE,cAAC,IAAD,CAAQE,SAAUC,oBAAlB,SACE,cAAC,EAAmBC,SAApB,CAA6BjE,MAAOwC,EAApC,SACE,sBAAK7F,UAAU,OAAf,UACE,cAACN,EAAD,CAAQC,UA5BhB,WACEzB,IACA4H,EAAe,SA2BT,eAAC,IAAD,WACE,cAAC,IAAD,CAAOnB,KAAK,WAAZ,SACE,cAAC,EAAD,CAAUU,WA1BtB,SAAsBhF,EAAOiF,InBxIT,SAACjF,EAAOiF,GAC5B,IAAMiC,EAAG,UAAMjK,EAAN,UAKT,OAAOiB,MAAMgJ,EAAK,CAChB/I,OAAQ,OACRH,QANc,CACd,eAAgB,oBAMhBY,KAAMC,KAAKC,UAAU,CACnBkB,QACAiF,eAED7G,KAAKjB,ImB4HNgK,CAAOnH,EAAOiF,GACX7G,MAAK,SAAChB,GAKL,OAJAwJ,GAAe,CACbH,MAAM,EACNC,OAAO,IAEFtJ,KAER0I,OAAM,SAACC,GACNa,GAAe,CACbH,MAAM,EACNC,OAAO,IAGTpE,QAAQC,IAAIwD,WAaR,cAAC,IAAD,CAAOzB,KAAK,WAAZ,SACE,cAAC,EAAD,CAAOa,QApDnB,YACE,OnBlIkB,SAACnF,EAAOiF,GAC5B,IAAMiC,EAAG,UAAMjK,EAAN,UAKT,OAAOiB,MAAMgJ,EAAK,CAChB/I,OAAQ,OACRH,QANc,CACd,eAAgB,oBAMhBY,KAAMC,KAAKC,UAAU,CACnBkB,QACAiF,eAED7G,KAAKjB,GmBqHCiK,CADkC,EAAnBpH,MAAmB,EAAZiF,UAE1B7G,MAAK,SAAChB,GnB5IiB,IAAC4F,EmB6InB5F,EAAIiK,QnB7IerE,EmB8IN5F,EAAIiK,MnB7I3B1J,aAAa2J,QAAQpK,EAAmB8F,GmB8IhC3E,EAAII,gBACJV,IACGK,MAAK,SAAC4H,GAAD,OAAaP,EAAeO,EAAQH,SACzCC,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,MAC9B1H,EACGsH,aACAvH,MAAK,SAACwH,GAAD,OAAkBF,EAASE,EAAaC,SAC7CC,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,UAGjCD,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,WAuCtB,cAAC,EAAD,CAAgBxB,OAAK,EAACD,KAAK,IAA3B,SACE,cAACjD,EAAD,CACEC,cAvId,WACE4E,GAA0B,IAuId3E,WApId,WACE6E,GAAuB,IAoIX5E,aA7Id,WACE8E,GAAyB,IA6IbjG,YA9Hd,SAAyBD,GACvByG,GAAgBzG,IA8HJE,cAnId,WACEkG,GAA4B,IAmIhBjG,WA5Fd,SAAwBH,GACtB,IAAMnB,EAAUmB,EAAKI,MAAMI,MAAK,SAACC,GAAD,OAAOA,IAAM2E,EAAY7E,OAEzDtC,EACGkJ,qBAAqBnH,EAAKO,IAAK1B,GAC/Bb,MAAK,SAACoJ,GAAD,OACJ9B,GAAS,SAACgB,GAAD,OACPA,EAAM/E,KAAI,SAAC8F,GAAD,OAAQA,EAAE9G,MAAQP,EAAKO,IAAM6G,EAAQ3B,KAAO4B,WAGzD3B,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,OAmFlBtE,aAhFd,SAA0BrB,GACxB/B,EACGqJ,WAAWtH,EAAKO,KAChBvC,MAAK,kBAAMsH,GAAS,SAACgB,GAAD,OAAWA,EAAMiB,QAAO,SAACF,GAAD,OAAOA,EAAE9G,MAAQP,EAAKO,aAClEmF,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,OA6ElBrE,MAAOA,SAKb,cAACE,EAAD,IAEA,cAAC,EAAD,CACEK,SAAUgE,EACV/D,QAAS4E,GACThE,aA5HV,YAA4C,IAAhBpE,EAAe,EAAfA,KAAMC,EAAS,EAATA,MAChCN,EACGuJ,eAAelJ,EAAMC,GACrBP,MAAK,SAACmB,GACLkG,EAAelG,EAAKsG,MACpBiB,QAEDhB,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,SAwHxB,cAAC,EAAD,CACE9D,SAAUoE,EACVnE,QAAS4E,GACT/C,eAxHV,YAAyC,IAAX7E,EAAU,EAAVA,OAC5Bb,EACGwJ,iBAAiB3I,GACjBd,MAAK,SAACmB,GACLkG,EAAelG,EAAKsG,MACpBiB,QAEDhB,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,SAoHxB,cAAC3B,EAAD,CACEnC,SAAUkE,EACVjE,QAAS4E,GACTvF,WAhGV,YAAgD,IAAhBzB,EAAe,EAAfA,MAAOf,EAAQ,EAARA,KAErCV,EACGyJ,WAAW,CAAEpJ,KAAMoB,EAAOf,SAC1BX,MAAK,SAACgC,GACLsF,EAAS,CAACtF,EAAKyF,MAAP,mBAAgBnE,KACxBoF,QAEDhB,OAAM,SAACC,GAAD,OAASzD,QAAQC,IAAIwD,SA2FxB,cAAChE,EAAD,CACEE,SAAUsE,EACVrE,QAAS4E,GACThH,MAAM,2DACNpB,KAAK,iBACLsD,WAAW,iBAGb,cAAC,EAAD,CACEC,SAAU0E,EAAYF,KACtB/H,KAAK,cACLkG,QAAS+B,EAAYD,MACrBxE,QAAS4E,KAGX,cAACpE,EAAD,CAAYC,aAAcA,GAAcT,QAAS4E,aCxO5CiB,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB7J,MAAK,YAAkD,IAA/C8J,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAAS9D,OACP,cAAC,IAAM+D,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BX,M","file":"static/js/main.6be716b8.chunk.js","sourcesContent":["export const authToken = 'bedcf061-ec3c-4659-8ef2-ecacae078c05'\nexport const baseUrl = 'https://mesto.nomoreparties.co/v1/cohort-22'\nexport const AUTH_ENDPOINT = 'https://auth.nomoreparties.co/'\n// export const baseUrl = 'https://auth.nomoreparties.co'\nexport const STORAGE_TOKEN_KEY = 'actk'\n","export default function checkResponse(res) {\n  if (res.ok) {\n    return res.json()\n  }\n  // eslint-disable-next-line prefer-promise-reject-errors\n  return Promise.reject(`Ошибка ${res.status}`)\n}\n","import checkResponse from './checkResponse'\nimport { AUTH_ENDPOINT, STORAGE_TOKEN_KEY } from './constants'\n\nexport const setAccessToken = (value) => {\n  localStorage.setItem(STORAGE_TOKEN_KEY, value)\n}\n\nexport const getAccessToken = () => localStorage.getItem(STORAGE_TOKEN_KEY)\n\nexport const removeAccessToken = () =>\n  localStorage.removeItem(STORAGE_TOKEN_KEY)\n\nexport const signIn = (email, password) => {\n  const url = `${AUTH_ENDPOINT}signin`\n  const headers = {\n    'Content-Type': 'application/json',\n  }\n\n  return fetch(url, {\n    method: 'POST',\n    headers,\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  }).then(checkResponse)\n}\n\nexport const signUp = (email, password) => {\n  const url = `${AUTH_ENDPOINT}signup`\n  const headers = {\n    'Content-Type': 'application/json',\n  }\n\n  return fetch(url, {\n    method: 'POST',\n    headers,\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  }).then(checkResponse)\n}\n\nexport const signOut = () => {\n  removeAccessToken()\n}\n\nexport const getUserInfo = () => {\n  const headers = {\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${getAccessToken()}`,\n  }\n\n  return fetch(`${AUTH_ENDPOINT}users/me`, {\n    method: 'GET',\n    headers,\n  }).then(checkResponse)\n}\n","import { baseUrl, AUTH_ENDPOINT } from './constants'\nimport checkResponse from './checkResponse'\nimport { getAccessToken } from './auth'\n\nclass Api {\n  constructor(options) {\n    this.baseUrl = options.baseUrl\n    this.headers = options.headers\n\n    this.setAuthHeader()\n  }\n\n  setAuthHeader() {\n    this.headers.Authorization = `Bearer ${getAccessToken()}`\n  }\n\n  updateUserInfo(name, about) {\n    return fetch(`${AUTH_ENDPOINT}users/me`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        name,\n        about,\n      }),\n    }).then(checkResponse)\n  }\n\n  fetchCards() {\n    return fetch(`${AUTH_ENDPOINT}cards`, {\n      method: 'GET',\n      headers: this.headers,\n    }).then(checkResponse)\n  }\n\n  createCard({ name, link }) {\n    return fetch(`${AUTH_ENDPOINT}cards`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        name,\n        link,\n      }),\n    }).then(checkResponse)\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${AUTH_ENDPOINT}cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this.headers,\n    }).then(checkResponse)\n  }\n\n  changeCardLikeStatus(cardId, isLiked) {\n    return fetch(`${AUTH_ENDPOINT}cards/${cardId}/likes`, {\n      method: isLiked ? 'DELETE' : 'PUT',\n      headers: this.headers,\n    }).then(checkResponse)\n  }\n\n  updateUserAvatar(avatar) {\n    return fetch(`${AUTH_ENDPOINT}users/me/avatar`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar,\n      }),\n    }).then(checkResponse)\n  }\n}\n\nconst api = new Api({\n  baseUrl,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n})\n\nexport default api\n","import { createContext } from 'react'\n\nconst CurrentUserContext = createContext()\nexport default CurrentUserContext\n","import { useContext } from 'react'\nimport { NavLink, useLocation } from 'react-router-dom'\n\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nexport default function Header({ onSignOut }) {\n  const user = useContext(CurrentUserContext)\n  const location = useLocation()\n\n  return (\n    <header className=\"header container\">\n      <NavLink\n        to=\"/\"\n        className=\"header__logo\"\n        target=\"_self\"\n        title=\"Главная страница Mesto\"\n      >\n        <span className=\"header__logo_type_sr\">Главная страница Mesto</span>\n      </NavLink>\n      {!user && location.pathname === '/sign-in' && (\n        <NavLink to=\"/sign-up\" className=\"link\">\n          Регистрация\n        </NavLink>\n      )}\n      {!user && location.pathname === '/sign-up' && (\n        <NavLink to=\"/sign-in\" className=\"link\">\n          Войти\n        </NavLink>\n      )}\n      {user && (\n        <>\n          <span className=\"profile-info__email\">{user.email}</span>\n          <button\n            type=\"button\"\n            className=\"button button_type_basic\"\n            onClick={onSignOut}\n          >\n            Выйти\n          </button>\n        </>\n      )}\n    </header>\n  )\n}\n","import { useContext } from 'react'\n\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nexport default function Card({ card, onCardClick, onDeleteClick, onCardLike }) {\n  const { name, link, likes, owner } = card\n\n  const user = useContext(CurrentUserContext)\n\n  const isOwn = owner === user?._id\n  const isLiked = likes?.some((i) => i === user?._id)\n\n  function handleLikeClick() {\n    onCardLike(card)\n  }\n\n  function handleDeleteClick() {\n    onDeleteClick(card)\n  }\n\n  return (\n    <li className=\"card\">\n      {isOwn && (\n        <button\n          className=\"button button_type_delete\"\n          type=\"button\"\n          aria-label=\"Удалить карточку\"\n          onClick={handleDeleteClick}\n        />\n      )}\n      <img\n        src={link}\n        alt={name}\n        className=\"card__image card__main-image\"\n        onClick={() => onCardClick(card)}\n        onKeyDown={(evt) => evt.key === 'Enter' && onCardClick(card)}\n      />\n      <div className=\"card__info\">\n        <h2 className=\"card__title\" title={name}>\n          {name}\n        </h2>\n        <div className=\"card__like-wrapper\">\n          <button\n            type=\"button\"\n            // @TODO: add different labels for different states of like\n            aria-label=\"Поставить лайк карточке\"\n            className={`button button_type_like ${\n              isLiked && 'button_type_like_active'\n            }`}\n            onClick={handleLikeClick}\n          />\n          <span className=\"card__like-counter\">{likes?.length}</span>\n        </div>\n      </div>\n    </li>\n  )\n}\n","import { useContext } from 'react'\n\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nimport Card from './Card'\n\nexport default function Main({\n  onEditProfile,\n  onAddPlace,\n  onEditAvatar,\n  onCardClick,\n  onCardLike,\n  onCardDelete,\n  cards,\n}) {\n  const user = useContext(CurrentUserContext)\n\n  return (\n    <main className=\"main container\">\n      <section className=\"profile\">\n        <div className=\"avatar\">\n          <img src={user?.avatar} className=\"avatar__image\" alt={user?.name} />\n          <button\n            className=\"button avatar__edit\"\n            aria-label=\"Редактировать аватар\"\n            type=\"button\"\n            onClick={onEditAvatar}\n          />\n        </div>\n        <div className=\"profile-info\">\n          <div className=\"profile-info__inner\">\n            <h1 className=\"profile-info__name\">{user?.name}</h1>\n            <button\n              type=\"button\"\n              aria-label=\"Редактировать профиль\"\n              className=\"button button_type_edit\"\n              onClick={onEditProfile}\n            />\n          </div>\n          <p className=\"profile-info__about\">{user?.about}</p>\n        </div>\n        <button\n          type=\"button\"\n          aria-label=\"Добавить\"\n          className=\"button button_type_add\"\n          onClick={onAddPlace}\n        />\n      </section>\n      <section>\n        <ul className=\"elements\">\n          {cards.map((card) => (\n            <Card\n              card={card}\n              key={card._id}\n              onCardClick={onCardClick}\n              onDeleteClick={onCardDelete}\n              onCardLike={onCardLike}\n            />\n          ))}\n        </ul>\n      </section>\n    </main>\n  )\n}\n","import React from 'react'\n\nexport default function Footer() {\n  return (\n    <footer className=\"footer container\">\n      <p className=\"footer__title\">© {new Date().getFullYear()} Mesto Russia</p>\n    </footer>\n  )\n}\n","export default function PopupWithForm({\n  title,\n  name,\n  buttonText,\n  isOpened,\n  onClose,\n  onSubmit,\n  children,\n}) {\n\n  return (\n    <div\n      className={\n        isOpened\n          ? `popup popup_type_${name} popup_opened`\n          : `popup popup_type_${name}`\n      }\n      onKeyPress={(evt) => {\n        console.log(evt);\n      }}\n      role='dialog'\n    >\n      <div className=\"popup__container container\">\n        <button\n          type=\"button\"\n          aria-label=\"Закрыть\"\n          className=\"button button_type_close\"\n          onClick={onClose}\n        />\n        <form\n          className=\"form\"\n          name={`${name}-form`}\n          onSubmit={onSubmit}\n          noValidate\n        >\n          <div className=\"form__inner\">\n            <h2 className=\"popup__title\">{title}</h2>\n            {children}\n            <button\n              className=\"button button_type_save\"\n              type=\"submit\"\n            >\n              {buttonText}\n            </button>\n          </div>\n        </form>\n      </div>\n      <button\n        type='button'\n        title='Закрыть'\n        aria-label='Закрыть'\n        className=\"popup__overlay\"\n        onClick={onClose}\n\n      />\n    </div>\n  )\n}\n","export default function ImagePopup({ selectedCard, onClose }) {\n\n  return (\n    <div\n      className=\n      {`popup ${selectedCard ? 'popup_opened' : ''}`}\n    >\n      <div className=\"image-popup__container\">\n        <button\n          type=\"button\"\n          aria-label=\"Закрыть\"\n          className=\"button button_type_close\"\n          onClick={onClose}\n        />\n        <img\n          src={selectedCard?.link}\n          alt={selectedCard?.name}\n          loading=\"lazy\"\n          className=\"image-popup__image\"\n        />\n        <h2 className=\"image-popup__title\">{selectedCard?.name}</h2>\n      </div>\n    </div>\n  )\n}\n","import { useContext, useState, useEffect } from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nfunction EditProfilePopup({ isOpened, onClose, onUpdateUser }) {\n  const user = useContext(CurrentUserContext)\n\n  const [form, setForm] = useState({\n    name: {\n      value: '',\n      validity: null,\n      validtityMessage: '',\n    },\n    about: {\n      value: '',\n      validity: null,\n      validtityMessage: '',\n    },\n  })\n\n  useEffect(() => {\n    setForm({\n      name: {\n        value: user?.name,\n        validity: true,\n        validtityMessage: '',\n      },\n      about: {\n        value: user?.about,\n        validity: true,\n        validtityMessage: '',\n      },\n    })\n  }, [user, isOpened])\n\n  const handleChange = (evt) => {\n    setForm({\n      ...form,\n      [evt.target.name]: {\n        value: evt.target.value,\n        validity: evt.target.validity,\n        validtityMessage: evt.target.validationMessage,\n      },\n    })\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault()\n\n    onUpdateUser({\n      name: form.name.value,\n      about: form.about.value,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      isOpened={isOpened}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      buttonText=\"Сохранить\"\n    >\n      <div className=\"form__input-field\">\n        <input\n          type=\"text\"\n          className=\"form__text-field\"\n          placeholder=\"Имя\"\n          minLength=\"2\"\n          maxLength=\"40\"\n          required\n          name=\"name\"\n          value={form.name.value || ''}\n          onChange={handleChange}\n        />\n        <span className=\"form__input-error\">{form.name.validtityMessage}</span>\n      </div>\n\n      <div className=\"form__input-field\">\n        <input\n          type=\"text\"\n          className=\"form__text-field\"\n          placeholder=\"О себе\"\n          minLength=\"2\"\n          maxLength=\"200\"\n          required\n          name=\"about\"\n          value={form.about.value || ''}\n          onChange={handleChange}\n        />\n        <span className=\"form__input-error\">{form.about.validtityMessage}</span>\n      </div>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup\n","import React, { useRef } from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction EditAvatarPopup({ isOpened, onClose, onAvatarUpdate }) {\n  const avatarRef = useRef(null)\n\n  function handleSubmit(evt) {\n    evt.preventDefault()\n\n    onAvatarUpdate({\n      avatar: avatarRef.current.value,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      isOpened={isOpened}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      name=\"avatar\"\n      title=\"Обновить аватар\"\n      buttonText=\"Сохранить\"\n    >\n      <div className=\"form__input-field\">\n        <input\n          type=\"url\"\n          className=\"form__text-field\"\n          name=\"fieldAvatar\"\n          placeholder=\"Ссылка на картинку\"\n          ref={avatarRef}\n          required\n        />\n        {/* <span className=\"form__input-error\">\n          {avatarRef.current.validationMessage}\n        </span> */}\n      </div>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup\n","import { useState } from 'react'\n\nimport PopupWithForm from './PopupWithForm'\n\nexport default function AddPlacePopup({ isOpened, onClose, onAddPlace }) {\n  const [form, setForm] = useState({\n    title: {\n      value: '',\n      validity: null,\n      validtityMessage: '',\n    },\n    link: {\n      value: '',\n      validity: null,\n      validtityMessage: '',\n    },\n  })\n\n  const handleChange = (evt) => {\n    setForm({\n      ...form,\n      [evt.target.name]: {\n        value: evt.target.value,\n        validity: evt.target.validity,\n        validtityMessage: evt.target.validationMessage,\n      },\n    })\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault()\n\n    onAddPlace({\n      title: form.title.value,\n      link: form.link.value,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      isOpened={isOpened}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      name=\"add\"\n      title=\"Новое место\"\n      buttonText=\"Создать\"\n    >\n      <div className=\"form__input-field\">\n        <input\n          type=\"text\"\n          name=\"title\"\n          className=\"form__text-field\"\n          placeholder=\"Название\"\n          minLength=\"2\"\n          maxLength=\"30\"\n          required\n          value={form.title.value}\n          onChange={handleChange}\n        />\n        <span className=\"form__input-error\">{form.title.validtityMessage}</span>\n      </div>\n\n      <div className=\"form__input-field\">\n        <input\n          type=\"url\"\n          name=\"link\"\n          className=\"form__text-field\"\n          placeholder=\"Ссылка на картинку\"\n          required\n          value={form.link.value}\n          onChange={handleChange}\n        />\n        <span className=\"form__input-error\">{form.link.validtityMessage}</span>\n      </div>\n    </PopupWithForm>\n  )\n}\n","import { Route, Redirect } from \"react-router-dom\";\nimport { getAccessToken } from \"../utils/auth\";\n\nfunction ProtectedRoute({\n  path,\n  exact,\n  children\n}) {\n\n  const isLoggedIn = getAccessToken()\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={() => (\n        isLoggedIn ? children : <Redirect to=\"/sign-in\" />\n      )}\n    />\n  )\n}\n\nexport default ProtectedRoute\n","import React from 'react'\n\nfunction Popup({\n  isOpened,\n  name,\n  onClose,\n  children\n}) {\n  return (\n    <div\n      className={\n        isOpened\n          ? `popup popup_type_${name} popup_opened`\n          : `popup popup_type_${name}`\n      }\n      onKeyPress={(evt) => {\n        console.log(evt);\n      }}\n      role='dialog'\n    >\n      <div className=\"popup__container container\">\n        <button\n          type=\"button\"\n          aria-label=\"Закрыть\"\n          className=\"button button_type_close\"\n          onClick={onClose}\n        />\n        {children}\n      </div>\n      <button\n        type='button'\n        title='Закрыть'\n        aria-label='Закрыть'\n        className=\"popup__overlay\"\n        onClick={onClose}\n      />\n    </div>\n  )\n}\n\nexport default Popup\n","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/failure.df8eddf6.svg\";","import React from 'react'\nimport Popup from './Popup'\n\nimport successImage from '../images/success.svg'\nimport failureImage from '../images/failure.svg'\n\nfunction InfoTooltip({ success, name, isOpened, onClose }) {\n  return (\n    <Popup isOpened={isOpened} name={name} onClose={onClose}>\n      <div className=\"infotooltip\">\n        {success ? (\n          <>\n            <img\n              src={successImage}\n              alt=\"Успех\"\n              className=\"infotooltip__image\"\n            />\n            <p className=\"infotooltip__text\">Вы успешно зарегистрировались!</p>\n          </>\n        ) : (\n          <>\n            <img\n              src={failureImage}\n              alt=\"Ошибка\"\n              className=\"infotooltip__image\"\n            />\n            <p className=\"infotooltip__text\">\n              Что-то пошло не так! Попробуйте ещё раз.\n            </p>\n          </>\n        )}\n      </div>\n    </Popup>\n  )\n}\n\nexport default InfoTooltip\n","import { useState } from 'react'\nimport { NavLink } from 'react-router-dom'\n\nfunction Register({ onRegister }) {\n  const [form, setForm] = useState({\n    email: {\n      value: '',\n      validity: null,\n      validtityMessage: '',\n    },\n    password: {\n      value: '',\n      validity: null,\n      validtityMessage: '',\n    },\n  })\n\n  const handleChange = (evt) => {\n    setForm({\n      ...form,\n      [evt.target.name]: {\n        value: evt.target.value,\n        validity: evt.target.validity,\n        validtityMessage: evt.target.validationMessage,\n      },\n    })\n  }\n\n  const handleRegister = (evt) => {\n    evt.preventDefault()\n\n    onRegister(form.email.value, form.password.value)\n  }\n\n  return (\n    <main className=\"main container login\">\n      <h1 className=\"page__title login__title\">Регистрация</h1>\n      <form\n        className=\"login__form\"\n        name=\"login-form\"\n        onSubmit={handleRegister}\n        noValidate\n      >\n        <div className=\"form__input-field form__input-field_variant_dark\">\n          <input\n            type=\"email\"\n            name=\"email\"\n            className=\"form__text-field\"\n            placeholder=\"Email\"\n            minLength=\"2\"\n            maxLength=\"30\"\n            required\n            value={form.email.value}\n            onChange={handleChange}\n          />\n          <span className=\"form__input-error\">\n            {form.email.validtityMessage}\n          </span>\n        </div>\n\n        <div className=\"form__input-field form__input-field_variant_dark\">\n          <input\n            type=\"password\"\n            name=\"password\"\n            className=\"form__text-field\"\n            placeholder=\"Пароль\"\n            required\n            value={form.password.value}\n            onChange={handleChange}\n            minLength={8}\n          />\n          <span className=\"form__input-error\">\n            {form.password.validtityMessage}\n          </span>\n        </div>\n        <button\n          className=\"button button_type_save button_variant_light\"\n          type=\"submit\"\n        >\n          Зарегистрироваться\n        </button>\n      </form>\n      <div className=\"login__message\">\n        <span className=\"link\">Уже зарегистрированы? </span>\n        <NavLink className=\"link\" to=\"/sign-in\">\n          Войти\n        </NavLink>\n      </div>\n    </main>\n  )\n}\n\nexport default Register\n","import { useState } from 'react'\nimport { useHistory } from 'react-router-dom'\n\nfunction Login({ onLogin }) {\n  const history = useHistory()\n\n  const [form, setForm] = useState({\n    email: {\n      value: '',\n      validity: null,\n      validtityMessage: '',\n    },\n    password: {\n      value: '',\n      validity: null,\n      validtityMessage: '',\n    },\n  })\n\n  const handleChange = (evt) => {\n    setForm({\n      ...form,\n      [evt.target.name]: {\n        value: evt.target.value,\n        validity: evt.target.validity,\n        validtityMessage: evt.target.validationMessage,\n      },\n    })\n  }\n\n  const handleLogin = (evt) => {\n    evt.preventDefault()\n\n    onLogin({\n      email: form.email.value,\n      password: form.password.value,\n    }).then(() => history.push('/'))\n  }\n\n  return (\n    <main className=\"main container login\">\n      <h1 className=\"page__title login__title\">Вход</h1>\n      <form\n        className=\"login__form\"\n        name=\"login-form\"\n        onSubmit={handleLogin}\n        noValidate\n      >\n        <div className=\"form__input-field form__input-field_variant_dark\">\n          <input\n            type=\"email\"\n            name=\"email\"\n            className=\"form__text-field\"\n            placeholder=\"Email\"\n            minLength=\"2\"\n            maxLength=\"30\"\n            required\n            value={form.email.value}\n            onChange={handleChange}\n          />\n          <span className=\"form__input-error\">\n            {form.email.validtityMessage}\n          </span>\n        </div>\n\n        <div className=\"form__input-field form__input-field_variant_dark\">\n          <input\n            type=\"password\"\n            name=\"password\"\n            className=\"form__text-field\"\n            placeholder=\"Пароль\"\n            required\n            value={form.password.value}\n            onChange={handleChange}\n            minLength={8}\n          />\n          <span className=\"form__input-error\">\n            {form.password.validtityMessage}\n          </span>\n        </div>\n        <button\n          className=\"button button_type_save button_variant_light\"\n          type=\"submit\"\n        >\n          Войти\n        </button>\n      </form>\n    </main>\n  )\n}\n\nexport default Login\n","import { useState, useEffect } from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\nimport api from '../utils/api'\nimport CurrentUserContext from '../contexts/CurrentUserContext'\n\nimport Header from './Header'\nimport Main from './Main'\nimport Footer from './Footer'\nimport PopupWithForm from './PopupWithForm'\nimport ImagePopup from './ImagePopup'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport ProtectedRoute from './ProtectedRoute'\nimport InfoTooltip from './InfoTooltip'\n\nimport Register from './Register'\nimport Login from './Login'\n\nimport {\n  getAccessToken,\n  getUserInfo,\n  setAccessToken,\n  signIn,\n  signOut,\n  signUp,\n} from '../utils/auth'\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState(null)\n  const [cards, setCards] = useState([])\n\n  useEffect(() => {\n    if (getAccessToken()) {\n      api\n        .fetchCards()\n        .then((fetchedCards) => setCards(fetchedCards.data))\n        .catch((err) => console.log(err))\n\n      getUserInfo()\n        .then((userRes) => setCurrentUser(userRes.data))\n        .catch((err) => console.log(err))\n    }\n  }, [])\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false)\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false)\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false)\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = useState(\n    false\n  )\n\n  const [infoTooltip, setInfoTooltip] = useState({\n    open: false,\n    state: false,\n  })\n  const [selectedCard, setSelectedCard] = useState(null)\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true)\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true)\n  }\n\n  function handleDeleteClick() {\n    setIsConfirmDeletePopupOpen(true)\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false)\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setIsConfirmDeletePopupOpen(false)\n    setInfoTooltip((state) => ({\n      ...state,\n      open: false,\n    }))\n    setSelectedCard(null)\n  }\n\n  function handleUpdateUser({ name, about }) {\n    api\n      .updateUserInfo(name, about)\n      .then((user) => {\n        setCurrentUser(user.data)\n        closeAllPopups()\n      })\n      .catch((err) => console.log(err))\n  }\n\n  function handleAvatarUpdate({ avatar }) {\n    api\n      .updateUserAvatar(avatar)\n      .then((user) => {\n        setCurrentUser(user.data)\n        closeAllPopups()\n      })\n      .catch((err) => console.log(err))\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i === currentUser._id)\n\n    api\n      .changeCardLikeStatus(card._id, isLiked)\n      .then((newCard) =>\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard.data : c))\n        )\n      )\n      .catch((err) => console.log(err))\n  }\n\n  function handleCardDelete(card) {\n    api\n      .deleteCard(card._id)\n      .then(() => setCards((state) => state.filter((c) => c._id !== card._id)))\n      .catch((err) => console.log(err))\n  }\n\n  function handleAddPlaceSubmit({ title, link }) {\n    // TODO: fix naming to be uniform\n    api\n      .createCard({ name: title, link })\n      .then((card) => {\n        setCards([card.data, ...cards])\n        closeAllPopups()\n      })\n      .catch((err) => console.log(err))\n  }\n\n  function handleSignIn({ email, password }) {\n    return signIn(email, password)\n      .then((res) => {\n        if (res.token) {\n          setAccessToken(res.token)\n          api.setAuthHeader()\n          getUserInfo()\n            .then((userRes) => setCurrentUser(userRes.data))\n            .catch((err) => console.log(err))\n          api\n            .fetchCards()\n            .then((fetchedCards) => setCards(fetchedCards.data))\n            .catch((err) => console.log(err))\n        }\n      })\n      .catch((err) => console.log(err))\n  }\n\n  function handleSignOut() {\n    signOut()\n    setCurrentUser(null)\n  }\n\n  function handleSignUp(email, password) {\n    signUp(email, password)\n      .then((res) => {\n        setInfoTooltip({\n          open: true,\n          state: true,\n        })\n        return res\n      })\n      .catch((err) => {\n        setInfoTooltip({\n          open: true,\n          state: false,\n        })\n\n        console.log(err)\n      })\n  }\n\n  return (\n    <Router basename={process.env.PUBLIC_URL}>\n      <CurrentUserContext.Provider value={currentUser}>\n        <div className=\"page\">\n          <Header onSignOut={handleSignOut} />\n          <Switch>\n            <Route path=\"/sign-up\">\n              <Register onRegister={handleSignUp} />\n            </Route>\n            <Route path=\"/sign-in\">\n              <Login onLogin={handleSignIn} />\n            </Route>\n            <ProtectedRoute exact path=\"/\">\n              <Main\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n                onCardClick={handleCardClick}\n                onDeleteClick={handleDeleteClick}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete}\n                cards={cards}\n              />\n            </ProtectedRoute>\n          </Switch>\n\n          <Footer />\n\n          <EditProfilePopup\n            isOpened={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          <EditAvatarPopup\n            isOpened={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onAvatarUpdate={handleAvatarUpdate}\n          />\n\n          <AddPlacePopup\n            isOpened={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          <PopupWithForm\n            isOpened={isConfirmDeletePopupOpen}\n            onClose={closeAllPopups}\n            title=\"Вы уверены?\"\n            name=\"confirm-delete\"\n            buttonText=\"Да\"\n          />\n\n          <InfoTooltip\n            isOpened={infoTooltip.open}\n            name=\"infoTooltip\"\n            success={infoTooltip.state}\n            onClose={closeAllPopups}\n          />\n\n          <ImagePopup selectedCard={selectedCard} onClose={closeAllPopups} />\n        </div>\n      </CurrentUserContext.Provider>\n    </Router>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}